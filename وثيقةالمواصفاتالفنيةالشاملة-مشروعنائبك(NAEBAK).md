# وثيقة المواصفات الفنية الشاملة - مشروع نائبك (NAEBAK)

**الإصدار:** 2.0
**التاريخ:** 02 أكتوبر 2025
**المؤلف:** Manus AI

---

## 1. مقدمة وأهداف المشروع

يهدف مشروع "نائبك" إلى إنشاء منصة رقمية متكاملة لتعزيز التواصل والشفافية بين المواطنين المصريين وممثليهم في البرلمان (مجلسي النواب والشيوخ)، بالإضافة إلى المرشحين المحتملين. تسعى المنصة إلى تمكين المواطنين من متابعة أداء نوابهم، تقييمهم، تقديم الشكاوى والاقتراحات، والمشاركة بفعالية أكبر في الحياة السياسية والتشريعية. من خلال توفير أدوات تفاعلية متقدمة، يهدف المشروع إلى سد الفجوة بين الناخبين وممثليهم، وزيادة وعي المواطنين بالعملية البرلمانية، وتقديم آلية حديثة للمساءلة والمشاركة المجتمعية.

### الأهداف الرئيسية:
*   **تعزيز الشفافية:** توفير معلومات دقيقة ومحدثة عن النواب والمرشحين وأنشطتهم.
*   **تمكين المواطنين:** منح المواطنين أدوات لتقييم ممثليهم وإيصال أصواتهم.
*   **تحسين التواصل:** إنشاء قنوات اتصال مباشرة وفعالة بين المواطنين والنواب.
*   **دعم المساءلة:** تطوير نظام نقاط مبني على حل المشكلات لتقييم أداء النواب بشكل موضوعي.
*   **مركزية المعلومات:** تجميع كافة البيانات المتعلقة بالعملية الانتخابية والبرلمانية في منصة واحدة سهلة الاستخدام.

---

## 2. البنية التقنية وحزمة التكنولوجيا (Technology Stack)

لتحقيق أهداف المشروع بكفاءة وأمان، تم اختيار بنية حديثة تعتمد على تقنيات متطورة تضمن الأداء العالي وقابلية التوسع.

| المكون | التقنية المستخدمة | الغرض |
| :--- | :--- | :--- |
| **الواجهة الأمامية (Frontend)** | Next.js (React Framework) + TypeScript | بناء واجهة مستخدم تفاعلية وسريعة ومتجاوبة مع جميع الأجهزة، مع تحسين محركات البحث (SEO). |
| **الخلفية وقاعدة البيانات (Backend & DB)** | Supabase (Backend-as-a-Service) | توفير قاعدة بيانات PostgreSQL، نظام مصادقة، تخزين ملفات، ووظائف سحابية (Edge Functions) في حزمة واحدة. |
| **التصميم والـ CSS** | Bootstrap 5 & Custom CSS | ضمان تصميم متسق ومتجاوب مع الحفاظ على هوية الموقع البصرية (الأخضر والبرتقالي). |
| **النشر (Deployment)** | Vercel | نشر الواجهة الأمامية (Next.js) بسهولة مع تكامل مستمر (CI/CD) وأداء عالمي. |
| **إدارة الكود المصدري** | Git & GitHub | تتبع التغييرات في الكود وإدارة الإصدارات والتعاون بين المطورين. |

---

## 3. أدوار المستخدمين والصلاحيات

يعتمد النظام على خمسة أدوار رئيسية، لكل منها صلاحيات محددة لضمان أمان البيانات وتنظيم العمليات.

| الدور | الوصف | الصلاحيات الرئيسية |
| :--- | :--- | :--- |
| **المواطن (Citizen)** | المستخدم العام للمنصة. | - استعراض بيانات النواب والمرشحين.<br>- تقييم النواب/المرشحين.<br>- إرسال رسائل مباشرة.<br>- تقديم شكاوى (للأدمن).<br>- متابعة حالة الشكاوى والرسائل. |
| **المرشح/النائب (Candidate/Member)** | ممثل برلماني حالي أو مرشح. | - إدارة صفحته الشخصية (برنامج، إنجازات، أحداث).<br>- استقبال الرسائل والرد عليها.<br>- استقبال الشكاوى المسندة من الأدمن والتعامل معها (قبول، رفض، تعليق).<br>- تغيير البانر الخاص بصفحته. |
| **المدير (Manager)** | دور مساعد للأدمن بصلاحيات محدودة. | - إضافة وتعديل بيانات النواب والمرشحين.<br>- إدارة محتوى صفحاتهم (برنامج، إنجازات، أحداث).<br>- عرض بيانات الاتصال الخاصة (الهاتف والواتساب).<br>- **لا يمكنه الحذف.** |
| **الأدمن (Admin)** | المدير الأعلى للنظام. | - جميع صلاحيات المدير.<br>- إدارة جميع المستخدمين والمحتوى.<br>- الموافقة على المحتوى المضاف من النواب.<br>- إسناد الشكاوى.<br>- إدارة البانرات وعداد الزوار.<br>- إجراء عمليات النسخ الاحتياطي والاستعادة. |
| **الزائر (Guest)** | أي مستخدم غير مسجل دخوله. | - استعراض الصفحات العامة (الهبوط، استعراض المرشحين).<br>- لا يمكنه التفاعل (تقييم، رسائل، شكاوى). |

### بيانات الدخول الافتراضية:
*   **الأدمن:** `admin@naebak.com` / `Admin@123456`
*   **المدير:** `manager@naebak.com` / `Manager@123456`




---

## 4. هيكل الصفحات والعناصر الثابتة

لضمان تجربة مستخدم متسقة واحترافية، تحتوي جميع صفحات الموقع على أربعة عناصر أساسية ثابتة ومحمية، لا يمكن لأي صفحة أن تظهر بدونها.

### العناصر الثابتة (Protected Layout Components):

1.  **الهيدر (Header):**
    *   **المحتوى:** شعار الموقع، روابط التنقل الرئيسية (الرئيسية، النواب، المرشحون، ...)، زر تسجيل الدخول/الخروج، زر "تسجيل شكوى"، أيقونة ملف المستخدم.
    *   **السلوك:** ثابت في أعلى جميع الصفحات.

2.  **البانر (Banner):**
    *   **المحتوى:** صورة كبيرة تمتد بعرض الصفحة.
    *   **السلوك:** يظهر تحت الهيدر مباشرة. محتواه ديناميكي ويتغير بناءً على الصفحة الحالية أو إعدادات الأدمن (كما سيتم تفصيله في قسم نظام البانرات).

3.  **الشريط الإخباري (News Ticker):**
    *   **المحتوى:** شريط متحرك يعرض آخر الأخبار أو التحديثات الهامة.
    *   **السلوك:** يظهر تحت البانر، ويتم تحديث محتواه من خلال لوحة تحكم الأدمن.

4.  **الفوتر (Footer):**
    *   **المحتوى:** روابط مساعدة (من نحن، اتصل بنا، سياسة الخصوصية)، أيقونات وسائل التواصل الاجتماعي، حقوق النشر.
    *   **السلوك:** ثابت في أسفل جميع الصفحات.

### قائمة الصفحات الرئيسية:

*   **الصفحات العامة:**
    *   صفحة الهبوط (Landing Page)
    *   صفحة استعراض النواب/المرشحين (مع فلاتر)
    *   صفحة تسجيل الدخول / إنشاء حساب
    *   صفحات قانونية (من نحن، اتصل بنا، سياسة الخصوصية، شروط الاستخدام، أسئلة وأجوبة)

*   **صفحات المستخدمين:**
    *   الصفحة الشخصية للمواطن
    *   الصفحة الشخصية للنائب/المرشح
    *   لوحة تحكم المستخدم (Dashboard) لكل دور (مواطن، نائب، مدير، أدمن)

*   **صفحات الأنظمة:**
    *   صفحة إدارة الشكاوى (لكل دور)
    *   صفحة إدارة الرسائل (لكل دور)

---



## 5. مواصفات الأنظمة الوظيفية

### 5.1. نظام الشكاوى المتقدم

يعتبر نظام الشكاوى حجر الزاوية في تفاعل المواطنين مع ممثليهم. تم تصميمه ليكون شاملاً ومنظماً، مما يضمن وصول الشكوى ومتابعتها بفعالية.

**مسار عمل الشكوى (Workflow):**

1.  **تقديم الشكوى (بواسطة المواطن):**
    *   ينقر المواطن على زر "تسجيل شكوى" في الهيدر.
    *   يظهر نموذج منبثق (Modal) يحتوي على:
        *   حقل نصي لوصف الشكوى (بحد أقصى 1500 حرف).
        *   حقل لرفع المرفقات (صور، مستندات) بحد أقصى 10 ملفات.
    *   تُرسل الشكوى **مباشرة إلى الأدمن** لمراجعتها الأولية.

2.  **إدارة الشكوى (بواسطة الأدمن):**
    *   تظهر الشكوى في لوحة تحكم الأدمن مع حالة "قيد المراجعة".
    *   يقوم الأدمن بمراجعة الشكوى والتأكد من جديتها.
    *   يستخدم الأدمن زر "إسناد الشكوى" الذي يفتح قائمة بالنواب والمرشحين لاختيار الشخص المناسب لحل المشكلة.
    *   عند الإسناد، تتغير حالة الشكوى إلى "تم الإسناد".

3.  **التعامل مع الشكوى (بواسطة النائب/المرشح):**
    *   تظهر الشكوى المسندة في لوحة تحكم النائب/المرشح.
    *   تكون أمامه ثلاثة خيارات:
        *   **قبول:** يقبل الشكوى ويتعهد بحلها، مع تحديد عدد الأيام المتوقعة للحل.
        *   **رفض:** يرفض الشكوى مع كتابة سبب واضح للرفض.
        *   **تعليق للدراسة:** يعلق الشكوى لمدة محددة (يحددها بالأيام) لدراستها قبل اتخاذ قرار.

4.  **متابعة الشكوى (بواسطة المواطن):**
    *   في لوحة تحكم المواطن، يمكنه رؤية جميع شكاواه وحالتها المحدثة:
        *   إذا تم الرفض، يقرأ سبب الرفض.
        *   إذا تم التعليق، يرى مدة التعليق.
        *   إذا تم الإسناد، يرى اسم النائب/المرشح ورابط صفحته الشخصية.
        *   إذا تم القبول، يرى الموعد المتوقع للحل.

5.  **حل الشكوى وزيادة النقاط:**
    *   بعد أن يقوم النائب/المرشح بحل المشكلة، يغير حالتها إلى "تم الحل".
    *   يقوم الأدمن بمراجعة الحل والتأكد منه.
    *   عند موافقة الأدمن، **تزداد نقاط النائب/المرشح بنقطة واحدة**، وتظهر الشكوى على أنها "محلولة".
    *   للأدمن خيار حفظ الشكوى في الأرشيف أو حذفها نهائياً.

### 5.2. نظام الرسائل المباشرة

يوفر النظام قناة تواصل مباشرة بين المواطنين وممثليهم لإرسال استفسارات أو اقتراحات سريعة.

*   **إرسال الرسالة:** يمكن للمواطن إرسال رسالة من خلال زر "إرسال رسالة" الموجود على كارت النائب/المرشح في صفحة الاستعراض، أو من داخل صفحته الشخصية.
*   **محتوى الرسالة:** نص بحد أقصى 500 حرف، بدون مرفقات.
*   **الاستقبال والرد:** يستقبل النائب/المرشح الرسائل في صندوق الوارد الخاص به في لوحة التحكم، ويمكنه الرد عليها مباشرة.

### 5.3. نظام التقييم بالنجوم

آلية سريعة للمواطنين للتعبير عن رأيهم في أداء النواب والمرشحين.

*   **آلية التقييم:** يمكن للمواطن تقييم أي نائب أو مرشح مرة واحدة فقط.
*   **أماكن التقييم:** التقييم متاح على كارت المستخدم في صفحة الاستعراض، وداخل صفحته الشخصية (وهو نفس التقييم).
*   **صلاحيات الأدمن:** يمتلك الأدمن القدرة على تعديل قيم التقييم الأولية لأي نائب/مرشح، بما في ذلك **متوسط التقييم** و **عدد المقيمين**، وذلك لأغراض إدارية أو لتصحيح أي تلاعب.



### 5.4. نظام إدارة المحتوى (للنواب والمدراء)

يمنح النظام النواب والمرشحين القدرة على إثراء صفحاتهم الشخصية بالمحتوى الذي يعكس نشاطهم ورؤيتهم، مع الحفاظ على إشراف إداري لضمان جودة ومصداقية المحتوى.

| نوع المحتوى | صلاحيات النائب/المرشح | صلاحيات المدير | ملاحظات وموافقات |
| :--- | :--- | :--- | :--- |
| **البرنامج الانتخابي** | ✅ إضافة وتعديل النقاط | ✅ إضافة وتعديل النقاط | لا يتطلب موافقة مسبقة. |
| **الإنجازات** | ✅ إضافة إنجاز جديد | ✅ إضافة وتعديل الإنجازات | يظهر في قسم الإنجازات. قد يتطلب موافقة الأدمن حسب الإعدادات. |
| **المناسبات والأحداث** | ✅ إضافة حدث أو مؤتمر | ✅ إضافة وتعديل الأحداث | **لا يظهر المحتوى إلا بعد موافقة الأدمن.** |
| **البيانات الشخصية** | ✅ تعديل البيانات الأساسية | ✅ تعديل البيانات الأساسية | - |
| **الصور الشخصية** | ✅ رفع وتغيير الصورة | ✅ رفع وتغيير الصورة | - |

### 5.5. نظام إدارة البانرات الديناميكي

يوفر النظام مرونة عالية في عرض البانرات الإعلانية أو التوجيهية عبر أجزاء مختلفة من الموقع، مما يسمح بتخصيص التجربة البصرية للمستخدمين.

*   **البانر الرئيسي (صفحة الهبوط):** البانر الافتراضي هو `sisi-banner.jpg`، ولكن يمكن للأدمن تغييره في أي وقت من خلال لوحة التحكم.
*   **بانرات النواب/المرشحين:** يمكن لكل نائب أو مرشح رفع بانر مخصص لصفحته الشخصية ليعكس هويته أو حملته الانتخابية.
*   **بانرات مخصصة للمحافظات:** يمتلك الأدمن صلاحية تحديد بانر معين ليظهر لجميع المواطنين المسجلين في محافظة معينة. على سبيل المثال، يرى مستخدمو الإسكندرية بانرًا مختلفًا عن مستخدمي القاهرة في صفحاتهم الشخصية.
*   **بانر صفحة استعراض المرشحين:** يتغير هذا البانر ديناميكيًا عندما يقوم المستخدم بفلترة المرشحين حسب محافظة معينة، حيث يظهر البانر المخصص لهذه المحافظة.

---



## 6. الأدوات الإدارية المتقدمة (Advanced Admin Tools)

لضمان السيطرة الكاملة على المنصة وسير عملها، يتم تزويد الأدمن بمجموعة من الأدوات المتقدمة.

### 6.1. عداد الزوار المتقدم

بدلاً من البدء من الصفر، يمكن للأدمن التحكم في القيمة الأولية لعداد الزوار ليعكس انطباعًا بوجود نشاط على الموقع.

*   **آلية العمل:** يقوم الأدمن بتحديد **نطاق رقمي** (قيمة دنيا وقيمة قصوى) في لوحة التحكم.
*   **التحديث الدوري:** كل **45 دقيقة**، يقوم النظام تلقائيًا باختيار رقم عشوائي ضمن هذا النطاق.
*   **عرض العداد:** يبدأ عداد الزوار الظاهر على الموقع بالعد تصاعديًا من هذا الرقم العشوائي الجديد.

### 6.2. نظام النسخ الاحتياطي والاستعادة (Backup & Restore)

لضمان عدم فقدان البيانات الحيوية، يمتلك الأدمن القدرة على إجراء عمليات نسخ احتياطي واستعادة مباشرة من لوحة التحكم.

*   **النسخ الاحتياطي (Backup):** يمكن للأدمن تصدير بيانات (النواب، المرشحين، المواطنين) كملفات (مثل CSV أو JSON) وتنزيلها للاحتفاظ بها.
*   **الاستعادة (Restore):** يمكن للأدمن رفع ملفات النسخ الاحتياطي لاستعادة البيانات إلى حالتها السابقة في حالة حدوث أي خطأ.

---

## 7. متطلبات إضافية وتفاصيل التنفيذ

*   **القوائم المنسدلة:** يجب استخدام قوائم منسدلة ثابتة في جميع النماذج والفلاتر التي تتطلب اختيار **المحافظة** (من قائمة 27 محافظة) أو **الحزب السياسي**، لضمان توحيد البيانات.
*   **بيانات الاتصال الخاصة:** أرقام الهواتف والواتساب الخاصة بالنواب والمرشحين يتم تخزينها في قاعدة البيانات ولكنها لا تظهر إلا للمستخدمين الذين يحملون دور **"أدمن"** أو **"مدير"**.

---

## 8. خاتمة

تمثل هذه الوثيقة خريطة طريق شاملة لتطوير مشروع "نائبك". من خلال الالتزام بهذه المواصفات، يمكن بناء منصة قوية ومستقرة تلبي احتياجات جميع الأطراف المعنية وتساهم في تحقيق الأهداف المرجوة من المشروع. يجب أن تكون هذه الوثيقة مرجعًا أساسيًا لفريق التطوير خلال جميع مراحل العمل.

